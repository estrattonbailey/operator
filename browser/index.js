(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.operator = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},_loop=require("loop.js"),_loop2=_interopRequireDefault(_loop),_delegate=require("delegate"),_delegate2=_interopRequireDefault(_delegate),_nanoajax=require("nanoajax"),_nanoajax2=_interopRequireDefault(_nanoajax),_navigo=require("navigo"),_navigo2=_interopRequireDefault(_navigo),_dom=require("./lib/dom.js"),_dom2=_interopRequireDefault(_dom),_util=require("./lib/util.js"),router=new _navigo2.default(_util.origin),state={_state:{route:"",title:"",prev:{route:"/",title:""}},get route(){return this._state.route},set route(t){this._state.prev.route=this.route,this._state.route=t,(0,_util.setActiveLinks)(t)},get title(){return this._state.title},set title(t){this._state.prev.title=this.title,this._state.title=t,document.title=t}};exports.default=function(){function t(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=arguments[2],r=(0,_util.sanitize)(t);if(n?null:(0,_util.saveScrollPosition)(),s.emit("before:route",{route:r}),!state.paused){o(_util.origin+"/"+r,function(t){n?router.resolve(r):router.navigate(r),i(r,t),s.emit("after:route",{route:r,title:t}),e?e(r,t):null})}}function e(){var t=arguments.length<=0||void 0===arguments[0]?state.route:arguments[0],e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];router.navigate(t),state.route=t,e?state.title=e:null}function o(t,e){return _nanoajax2.default.ajax({method:"GET",url:t},function(t,o,i){return i.status<200||i.status>300&&304!==i.status?window.location=_util.origin+"/"+state._state.prev.route:void c(i.response,e)})}function i(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];state.route=t,e?state.title=e:null}function n(t,e){return l.filter(function(o){if(Array.isArray(o)){var i=o[1](e);return i&&s.emit(o[0],{route:e,event:t}),i}return o(e)}).length>0}var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],a=r.root||document.body,u=r.duration||0,l=r.ignore||[],s=(0,_loop2.default)(),c=(0,_dom2.default)(a,u,s),_=Object.create(_extends({},s,{stop:function(){state.paused=!0},start:function(){state.paused=!1},go:t,push:e}),{getState:{value:function(){return state._state}}});return state.route=""+window.location.pathname+window.location.search,state.title=document.title,(0,_delegate2.default)(document,"a","click",function(e){var o=e.delegateTarget,i=o.getAttribute("href")||"/",r=(0,_util.sanitize)(i);!_util.link.isSameOrigin(i)||"external"===o.getAttribute("rel")||o.classList.contains("no-ajax")||n(e,r)||_util.link.isHash(i)||(e.preventDefault(),_util.link.isSameURL(i)||t(_util.origin+"/"+r))}),window.onpopstate=function(e){var o=e.target.location.href;if(n(e,o)){if(_util.link.isHash(o))return;return void window.location.reload()}t(o,null,!0)},"scrollRestoration"in history&&(history.scrollRestoration="manual",history.state&&void 0!==history.state.scrollTop&&window.scrollTo(0,history.state.scrollTop),window.onbeforeunload=_util.saveScrollPosition),_};
},{"./lib/dom.js":2,"./lib/util.js":3,"delegate":5,"loop.js":6,"nanoajax":8,"navigo":9}],2:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _tarry=require("tarry.js"),_util=require("./util"),parser=new DOMParser,parseResponse=function(e){return parser.parseFromString(e,"text/html")},evalScripts=function evalScripts(source){var root=arguments.length<=1||void 0===arguments[1]?null:arguments[1],errors=[],scripts=Array.prototype.slice.call(source.getElementsByTagName("script")),existing=root?Array.prototype.slice.call(root.getElementsByTagName("script")):[],dupe=function(e){return existing.filter(function(r){return e.innerHTML===r.innerHTML&&e.src===r.src}).length>0};scripts.length>0&&scripts.forEach(function(t){var s=t.cloneNode(!0);if(!dupe(s)){s.setAttribute("data-ajaxed","true");try{eval(s.innerHTML)}catch(e){errors.push(e)}try{root?root.insertBefore(s,root.children[0]):source.replaceChild(s,t)}catch(e){errors.push(e),document.head.insertBefore(s,document.head.children[0])}}}),errors.length>0&&(console.groupCollapsed("operator.js"),errors.forEach(function(e){return console.log(e)}),console.groupEnd())},returnSize=function(e,r){var t=!(null===e||!e.window);return t?Math.max(e["outer"+r],document.documentElement["client"+r]):Math.max(e["offset"+r],e["client"+r])};exports.default=function(e,r,t){return function(n,o){var s=parseResponse(n),i=s.head.getElementsByTagName("title")[0].innerHTML,a=document.querySelector(e),c=(0,_tarry.tarry)(function(){t.emit("before:transition"),document.documentElement.classList.add("is-transitioning"),a.style.height=returnSize(a,"Height")+"px"},r),u=(0,_tarry.tarry)(function(){a.innerHTML=s.querySelector(e).innerHTML,o(i,a),evalScripts(a),evalScripts(s.head,document.head),(0,_util.restoreScrollPos)()},r),l=(0,_tarry.tarry)(function(){document.documentElement.classList.remove("is-transitioning"),a.style.height=""},r),p=(0,_tarry.tarry)(function(){return t.emit("after:transition")},r);(0,_tarry.queue)(c,u,l,p)()}};
},{"./util":3,"tarry.js":10}],3:[function(require,module,exports){
"use strict";function _toConsumableArray(r){if(Array.isArray(r)){for(var e=0,t=Array(r.length);e<r.length;e++)t[e]=r[e];return t}return Array.from(r)}Object.defineProperty(exports,"__esModule",{value:!0});var getOrigin=function(r){return r.origin||r.protocol+"//"+r.host},origin=exports.origin=getOrigin(window.location),originRegEx=exports.originRegEx=new RegExp(origin),sanitize=exports.sanitize=function(r){var e=r.replace(originRegEx,""),t=e.match(/^\//)?e.replace(/\/{1}/,""):e;return""===t?"/":t},parseURL=exports.parseURL=function(r){var e=document.createElement("a");return e.href=r,e},link=exports.link={isSameOrigin:function(r){return origin===getOrigin(parseURL(r))},isHash:function(r){return/#/.test(r)},isSameURL:function(r){return window.location.search===parseURL(r).search&&window.location.pathname===parseURL(r).pathname}},getScrollPosition=exports.getScrollPosition=function(){return window.pageYOffset||window.scrollY},saveScrollPosition=exports.saveScrollPosition=function(){return window.history.replaceState({scrollTop:getScrollPosition()},"")},restoreScrollPos=exports.restoreScrollPos=function(){var r=history.state?history.state.scrollTop:void 0;return history.state&&void 0!==r?(window.scrollTo(0,r),r):void window.scrollTo(0,0)},activeLinks=[],setActiveLinks=exports.setActiveLinks=function(r){activeLinks.forEach(function(r){return r.classList.remove("is-active")}),activeLinks.splice(0,activeLinks.length),activeLinks.push.apply(activeLinks,_toConsumableArray(Array.prototype.slice.call(document.querySelectorAll('[href$="'+r+'"]')))),activeLinks.forEach(function(r){return r.classList.add("is-active")})};
},{}],4:[function(require,module,exports){
var matches=require("matches-selector");module.exports=function(e,r,t){for(var o=t?e:e.parentNode;o&&o!==document;){if(matches(o,r))return o;o=o.parentNode}};
},{"matches-selector":7}],5:[function(require,module,exports){
function delegate(e,t,r,n,l){var s=listener.apply(this,arguments);return e.addEventListener(r,s,l),{destroy:function(){e.removeEventListener(r,s,l)}}}function listener(e,t,r,n){return function(r){r.delegateTarget=closest(r.target,t,!0),r.delegateTarget&&n.call(e,r)}}var closest=require("closest");module.exports=delegate;
},{"closest":4}],6:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};exports.default=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={},n=function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1];n&&(t[e]=t[e]||{queue:[]},t[e].queue.push(n))},r=function(e){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=!!t[e]&&t[e].queue;r&&r.forEach(function(e){return e(n)})};return _extends({},e,{emit:r,on:n})};
},{}],7:[function(require,module,exports){
function match(e,o){if(vendor)return vendor.call(e,o);for(var t=e.parentNode.querySelectorAll(o),r=0;r<t.length;++r)if(t[r]==e)return!0;return!1}var proto=Element.prototype,vendor=proto.matchesSelector||proto.webkitMatchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector;module.exports=match;
},{}],8:[function(require,module,exports){
(function (global){
function getRequest(e){return e&&global.XDomainRequest&&!/MSIE 1/.test(navigator.userAgent)?new XDomainRequest:global.XMLHttpRequest?new XMLHttpRequest:void 0}function setDefault(e,t,o){e[t]=e[t]||o}var reqfields=["responseType","withCredentials","timeout","onprogress"];exports.ajax=function(e,t){function o(e,o){return function(){a||(t(void 0===u.status?e:u.status,0===u.status?"Error":u.response||u.responseText||o,u),a=!0)}}var r=e.headers||{},n=e.body,s=e.method||(n?"POST":"GET"),a=!1,u=getRequest(e.cors);u.open(s,e.url,!0);var l=u.onload=o(200);u.onreadystatechange=function(){4===u.readyState&&l()},u.onerror=o(null,"Error"),u.ontimeout=o(null,"Timeout"),u.onabort=o(null,"Abort"),n&&(setDefault(r,"X-Requested-With","XMLHttpRequest"),global.FormData&&n instanceof global.FormData||setDefault(r,"Content-Type","application/x-www-form-urlencoded"));for(var i,d=0,f=reqfields.length;d<f;d++)i=reqfields[d],void 0!==e[i]&&(u[i]=e[i]);for(var i in r)u.setRequestHeader(i,r[i]);return u.send(n),u};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],9:[function(require,module,exports){
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Navigo",[],e):"object"==typeof exports?exports.Navigo=e():t.Navigo=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t){return t instanceof RegExp?t:t.replace(/\/+$/,"").replace(/^\/+/,"/")}function r(t,e){return 0===e.length?null:t?t.slice(1,t.length).reduce(function(t,n,o){return null===t&&(t={}),t[e[o]]=n,t},null):null}function i(t){var e,n=[];return e=t instanceof RegExp?t:new RegExp(o(t).replace(f,function(t,e,o){return n.push(o),p}).replace(h,v)+_),{regexp:e,paramNames:n}}function u(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];return e.map(function(e){var n=i(e.route),o=n.regexp,u=n.paramNames,s=t.match(o),a=r(s,u);return!!s&&{match:s,route:e,params:a}}).filter(function(t){return t})}function s(t,e){return u(t,e)[0]||!1}function a(t,e){var n=u(t,e.filter(function(t){var e=o(t.route);return""!==e&&"*"!==e})),r=o(t);return n.length>0?n.map(function(e){return o(t.substr(0,e.match.index))}).reduce(function(t,e){return e.length<t.length?e:t},r):r}function l(){return!("undefined"==typeof window||!window.history||!window.history.pushState)}function d(t,e){this._routes=[],this.root=e&&t?t.replace(/\/$/,"/#"):t||null,this._useHash=e,this._paused=!1,this._destroyed=!1,this._lastRouteResolved=null,this._notFoundHandler=null,this._defaultHandler=null,this._ok=!e&&l(),this._listen(),this.updatePageLinks()}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0});var f=/([:*])(\w+)/g,h=/\*/g,p="([^/]+)",v="(?:.*)",_="(?:/|$)";d.prototype={helpers:{match:s,root:a,clean:o},navigate:function(t,e){var n;return t=t||"",this._ok?(n=(e?"":this._getRoot()+"/")+o(t),n=n.replace(/([^:])(\/{2,})/g,"$1/"),history[this._paused?"replaceState":"pushState"]({},"",n),this.resolve()):"undefined"!=typeof window&&(window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t),this},on:function(){if(arguments.length>=2)this._add(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);else if("object"===c(arguments.length<=0?void 0:arguments[0]))for(var t in arguments.length<=0?void 0:arguments[0])this._add(t,(arguments.length<=0?void 0:arguments[0])[t]);else"function"==typeof(arguments.length<=0?void 0:arguments[0])&&(this._defaultHandler=arguments.length<=0?void 0:arguments[0]);return this},notFound:function(t){this._notFoundHandler=t},resolve:function(t){var e,o,r=(t||this._cLoc()).replace(this._getRoot(),"");return!this._paused&&r!==this._lastRouteResolved&&(this._useHash&&(r=r.replace(/^\/#/,"/")),(o=s(r,this._routes))?(this._lastRouteResolved=r,e=o.route.handler,o.route.route instanceof RegExp?e.apply(void 0,n(o.match.slice(1,o.match.length))):e(o.params),o):!this._defaultHandler||""!==r&&"/"!==r?(this._notFoundHandler&&this._notFoundHandler(),!1):(this._defaultHandler(),!0))},destroy:function(){this._routes=[],this._destroyed=!0,clearTimeout(this._listenningInterval),"undefined"!=typeof window?window.onpopstate=null:null},updatePageLinks:function(){var t=this;"undefined"!=typeof document&&this._findLinks().forEach(function(e){e.hasListenerAttached||(e.addEventListener("click",function(n){var r=e.getAttribute("href");t._destroyed||(n.preventDefault(),t.navigate(o(r)))}),e.hasListenerAttached=!0)})},generate:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return this._routes.reduce(function(n,o){var r;if(o.name===t){n=o.route;for(r in e)n=n.replace(":"+r,e[r])}return n},"")},link:function(t){return this._getRoot()+t},pause:function(t){this._paused=t},disableIfAPINotAvailable:function(){l()||this.destroy()},_add:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];return"object"===("undefined"==typeof e?"undefined":c(e))?this._routes.push({route:t,handler:e.uses,name:e.as}):this._routes.push({route:t,handler:e}),this._add},_getRoot:function(){return null!==this.root?this.root:(this.root=a(this._cLoc(),this._routes),this.root)},_listen:function(){var t=this;this._ok?window.onpopstate=function(){t.resolve()}:!function(){var e=t._cLoc(),n=void 0,o=void 0;(o=function(){n=t._cLoc(),e!==n&&(e=n,t.resolve()),t._listenningInterval=setTimeout(o,200)})()}()},_cLoc:function(){return"undefined"!=typeof window?window.location.href:""},_findLinks:function(){return[].slice.call(document.querySelectorAll("[data-navigo]"))}},e.default=d,t.exports=e.default}])});
},{}],10:[function(require,module,exports){
(function (global){
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};!function(e){if("object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.tarry=e()}}(function(){return function e(r,n,t){function o(u,i){if(!n[u]){if(!r[u]){var l="function"==typeof require&&require;if(!i&&l)return l(u,!0);if(f)return f(u,!0);var y=new Error("Cannot find module '"+u+"'");throw y.code="MODULE_NOT_FOUND",y}var a=n[u]={exports:{}};r[u][0].call(a.exports,function(e){var n=r[u][1][e];return o(n?n:e)},a,a.exports,e,r,n,t)}return n[u].exports}for(var f="function"==typeof require&&require,u=0;u<t.length;u++)o(t[u]);return o}({1:[function(e,r,n){function t(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(e,r){e(),r.length>0?r.shift().apply(void 0,t(r)):null};n.tarry=function(e){var r=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return function(){for(var n=arguments.length,t=Array(n),f=0;f<n;f++)t[f]=arguments[f];return r?setTimeout(function(){return o(e,t)},r):o(e,t)}},n.queue=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(){return r.shift().apply(void 0,r)}}},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}]},{},[1])(1)
});